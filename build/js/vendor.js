(function(){function t(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function e(e,n){var r=typeof n;if(e=e.cache,"boolean"==r||null==n)return e[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:y+n;return e=(e=e[r])&&e[i],"object"==r?e&&t(e,n)>-1?0:-1:e?0:-1}function n(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:y+t,i=e[n]||(e[n]={});"object"==n?(i[r]||(i[r]=[])).push(t):i[r]=!0}}function r(t){return t.charCodeAt(0)}function i(t,e){for(var n=t.criteria,r=e.criteria,i=-1,a=n.length;++i<a;){var o=n[i],u=r[i];if(o!==u){if(o>u||"undefined"==typeof o)return 1;if(u>o||"undefined"==typeof u)return-1}}return t.index-e.index}function a(t){var e=-1,r=t.length,i=t[0],a=t[r/2|0],o=t[r-1];if(i&&"object"==typeof i&&a&&"object"==typeof a&&o&&"object"==typeof o)return!1;var u=s();u["false"]=u["null"]=u["true"]=u.undefined=!1;var c=s();for(c.array=t,c.cache=u,c.push=n;++e<r;)c.push(t[e]);return c}function o(t){return"\\"+X[t]}function u(){return d.pop()||[]}function s(){return v.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function c(t){t.length=0,d.length<_&&d.push(t)}function l(t){var e=t.cache;e&&l(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,v.length<_&&v.push(t)}function f(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,a=Array(0>i?0:i);++r<i;)a[r]=t[e+r];return a}function h(n){function d(t){return t&&"object"==typeof t&&!Zn(t)&&An.call(t,"__wrapped__")?t:new v(t)}function v(t,e){this.__chain__=!!e,this.__wrapped__=t}function _(t){function e(){if(r){var t=f(r);Hn.apply(t,arguments)}if(this instanceof e){var a=K(n.prototype),o=n.apply(a,t||arguments);return Ot(o)?o:a}return n.apply(i,t||arguments)}var n=t[0],r=t[2],i=t[4];return Qn(e,t),e}function X(t,e,n,r,i){if(n){var a=n(t);if("undefined"!=typeof a)return a}var o=Ot(t);if(!o)return t;var s=Sn.call(t);if(!D[s])return t;var l=Kn[s];switch(s){case P:case U:return new l(+t);case q:case z:return new l(t);case M:return a=l(t.source,E.exec(t)),a.lastIndex=t.lastIndex,a}var h=Zn(t);if(e){var p=!r;r||(r=u()),i||(i=u());for(var d=r.length;d--;)if(r[d]==t)return i[d];a=h?l(t.length):{}}else a=h?f(t):ar({},t);return h&&(An.call(t,"index")&&(a.index=t.index),An.call(t,"input")&&(a.input=t.input)),e?(r.push(t),i.push(a),(h?Gt:sr)(t,function(t,o){a[o]=X(t,e,n,r,i)}),p&&(c(r),c(i)),a):a}function K(t,e){return Ot(t)?Bn(t):{}}function G(t,e,n){if("function"!=typeof t)return Qe;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(Gn.funcNames&&(r=!t.name),r=r||!Gn.funcDecomp,!r)){var i=In.call(t);Gn.funcNames||(r=!C.test(i)),r||(r=O.test(i),Qn(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)}}return Ae(t,e)}function Q(t){function e(){var t=s?o:this;if(i){var d=f(i);Hn.apply(d,arguments)}if((a||l)&&(d||(d=f(arguments)),a&&Hn.apply(d,a),l&&d.length<u))return r|=16,Q([n,h?r:-4&r,d,null,o,u]);if(d||(d=arguments),c&&(n=t[p]),this instanceof e){t=K(n.prototype);var v=n.apply(t,d);return Ot(v)?v:t}return n.apply(t,d)}var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=1&r,c=2&r,l=4&r,h=8&r,p=n;return Qn(e,t),e}function Z(n,r){var i=-1,o=st(),u=n?n.length:0,s=u>=m&&o===t,c=[];if(s){var f=a(r);f?(o=e,r=f):s=!1}for(;++i<u;){var h=n[i];o(r,h)<0&&c.push(h)}return s&&l(r),c}function tt(t,e,n,r){for(var i=(r||0)-1,a=t?t.length:0,o=[];++i<a;){var u=t[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(Zn(u)||ht(u))){e||(u=tt(u,e,n));var s=-1,c=u.length,l=o.length;for(o.length+=c;++s<c;)o[l++]=u[s]}else n||o.push(u)}return o}function et(t,e,n,r,i,a){if(n){var o=n(t,e);if("undefined"!=typeof o)return!!o}if(t===e)return 0!==t||1/t==1/e;var s=typeof t,l=typeof e;if(!(t!==t||t&&W[s]||e&&W[l]))return!1;if(null==t||null==e)return t===e;var f=Sn.call(t),h=Sn.call(e);if(f==A&&(f=B),h==A&&(h=B),f!=h)return!1;switch(f){case P:case U:return+t==+e;case q:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case M:case z:return t==xn(e)}var p=f==H;if(!p){var d=An.call(t,"__wrapped__"),v=An.call(e,"__wrapped__");if(d||v)return et(d?t.__wrapped__:t,v?e.__wrapped__:e,n,r,i,a);if(f!=B)return!1;var g=t.constructor,y=e.constructor;if(g!=y&&!($t(g)&&g instanceof g&&$t(y)&&y instanceof y)&&"constructor"in t&&"constructor"in e)return!1}var m=!i;i||(i=u()),a||(a=u());for(var _=i.length;_--;)if(i[_]==t)return a[_]==e;var b=0;if(o=!0,i.push(t),a.push(e),p){if(_=t.length,b=e.length,o=b==_,o||r)for(;b--;){var w=_,x=e[b];if(r)for(;w--&&!(o=et(t[w],x,n,r,i,a)););else if(!(o=et(t[b],x,n,r,i,a)))break}}else ur(e,function(e,u,s){return An.call(s,u)?(b++,o=An.call(t,u)&&et(t[u],e,n,r,i,a)):void 0}),o&&!r&&ur(t,function(t,e,n){return An.call(n,e)?o=--b>-1:void 0});return i.pop(),a.pop(),m&&(c(i),c(a)),o}function nt(t,e,n,r,i){(Zn(e)?Gt:sr)(e,function(e,a){var o,u,s=e,c=t[a];if(e&&((u=Zn(e))||cr(e))){for(var l=r.length;l--;)if(o=r[l]==e){c=i[l];break}if(!o){var f;n&&(s=n(c,e),(f="undefined"!=typeof s)&&(c=s)),f||(c=u?Zn(c)?c:[]:cr(c)?c:{}),r.push(e),i.push(c),f||nt(c,e,n,r,i)}}else n&&(s=n(c,e),"undefined"==typeof s&&(s=e)),"undefined"!=typeof s&&(c=s);t[a]=c})}function rt(t,e){return t+Nn(Vn()*(e-t+1))}function it(n,r,i){var o=-1,s=st(),f=n?n.length:0,h=[],p=!r&&f>=m&&s===t,d=i||p?u():h;if(p){var v=a(d);s=e,d=v}for(;++o<f;){var g=n[o],y=i?i(g,o,n):g;(r?!o||d[d.length-1]!==y:s(d,y)<0)&&((i||p)&&d.push(y),h.push(g))}return p?(c(d.array),l(d)):i&&c(d),h}function at(t){return function(e,n,r){var i={};n=d.createCallback(n,r,3);var a=-1,o=e?e.length:0;if("number"==typeof o)for(;++a<o;){var u=e[a];t(i,u,n(u,a,e),e)}else sr(e,function(e,r,a){t(i,e,n(e,r,a),a)});return i}}function ot(t,e,n,r,i,a){var o=1&e,u=2&e,s=4&e,c=16&e,l=32&e;if(!u&&!$t(t))throw new kn;c&&!n.length&&(e&=-17,c=n=!1),l&&!r.length&&(e&=-33,l=r=!1);var h=t&&t.__bindData__;if(h&&h!==!0)return h=f(h),h[2]&&(h[2]=f(h[2])),h[3]&&(h[3]=f(h[3])),!o||1&h[1]||(h[4]=i),!o&&1&h[1]&&(e|=8),!s||4&h[1]||(h[5]=a),c&&Hn.apply(h[2]||(h[2]=[]),n),l&&Fn.apply(h[3]||(h[3]=[]),r),h[1]|=e,ot.apply(null,h);var p=1==e||17===e?_:Q;return p([t,e,n,r,i,a])}function ut(t){return er[t]}function st(){var e=(e=d.indexOf)===ye?t:e;return e}function ct(t){return"function"==typeof t&&Tn.test(t)}function lt(t){var e,n;return t&&Sn.call(t)==B&&(e=t.constructor,!$t(e)||e instanceof e)?(ur(t,function(t,e){n=e}),"undefined"==typeof n||An.call(t,n)):!1}function ft(t){return nr[t]}function ht(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Sn.call(t)==A||!1}function pt(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),X(t,e,"function"==typeof n&&G(n,r,1))}function dt(t,e,n){return X(t,!0,"function"==typeof e&&G(e,n,1))}function vt(t,e){var n=K(t);return e?ar(n,e):n}function gt(t,e,n){var r;return e=d.createCallback(e,n,3),sr(t,function(t,n,i){return e(t,n,i)?(r=n,!1):void 0}),r}function yt(t,e,n){var r;return e=d.createCallback(e,n,3),_t(t,function(t,n,i){return e(t,n,i)?(r=n,!1):void 0}),r}function mt(t,e,n){var r=[];ur(t,function(t,e){r.push(e,t)});var i=r.length;for(e=G(e,n,3);i--&&e(r[i--],r[i],t)!==!1;);return t}function _t(t,e,n){var r=tr(t),i=r.length;for(e=G(e,n,3);i--;){var a=r[i];if(e(t[a],a,t)===!1)break}return t}function bt(t){var e=[];return ur(t,function(t,n){$t(t)&&e.push(n)}),e.sort()}function wt(t,e){return t?An.call(t,e):!1}function xt(t){for(var e=-1,n=tr(t),r=n.length,i={};++e<r;){var a=n[e];i[t[a]]=a}return i}function kt(t){return t===!0||t===!1||t&&"object"==typeof t&&Sn.call(t)==P||!1}function jt(t){return t&&"object"==typeof t&&Sn.call(t)==U||!1}function Et(t){return t&&1===t.nodeType||!1}function Ct(t){var e=!0;if(!t)return e;var n=Sn.call(t),r=t.length;return n==H||n==z||n==A||n==B&&"number"==typeof r&&$t(t.splice)?!r:(sr(t,function(){return e=!1}),e)}function St(t,e,n,r){return et(t,e,"function"==typeof n&&G(n,r,2))}function Tt(t){return zn(t)&&!Dn(parseFloat(t))}function $t(t){return"function"==typeof t}function Ot(t){return!(!t||!W[typeof t])}function Nt(t){return Rt(t)&&t!=+t}function It(t){return null===t}function Rt(t){return"number"==typeof t||t&&"object"==typeof t&&Sn.call(t)==q||!1}function At(t){return t&&"object"==typeof t&&Sn.call(t)==M||!1}function Ht(t){return"string"==typeof t||t&&"object"==typeof t&&Sn.call(t)==z||!1}function Pt(t){return"undefined"==typeof t}function Ut(t,e,n){var r={};return e=d.createCallback(e,n,3),sr(t,function(t,n,i){r[n]=e(t,n,i)}),r}function Ft(t){var e=arguments,n=2;if(!Ot(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var r=G(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(r=e[--n]);for(var i=f(arguments,1,n),a=-1,o=u(),s=u();++a<n;)nt(t,i[a],r,o,s);return c(o),c(s),t}function qt(t,e,n){var r={};if("function"!=typeof e){var i=[];ur(t,function(t,e){i.push(e)}),i=Z(i,tt(arguments,!0,!1,1));for(var a=-1,o=i.length;++a<o;){var u=i[a];r[u]=t[u]}}else e=d.createCallback(e,n,3),ur(t,function(t,n,i){e(t,n,i)||(r[n]=t)});return r}function Bt(t){for(var e=-1,n=tr(t),r=n.length,i=dn(r);++e<r;){var a=n[e];i[e]=[a,t[a]]}return i}function Mt(t,e,n){var r={};if("function"!=typeof e)for(var i=-1,a=tt(arguments,!0,!1,1),o=Ot(t)?a.length:0;++i<o;){var u=a[i];u in t&&(r[u]=t[u])}else e=d.createCallback(e,n,3),ur(t,function(t,n,i){e(t,n,i)&&(r[n]=t)});return r}function zt(t,e,n,r){var i=Zn(t);if(null==n)if(i)n=[];else{var a=t&&t.constructor,o=a&&a.prototype;n=K(o)}return e&&(e=d.createCallback(e,r,4),(i?Gt:sr)(t,function(t,r,i){return e(n,t,r,i)})),n}function Dt(t){for(var e=-1,n=tr(t),r=n.length,i=dn(r);++e<r;)i[e]=t[n[e]];return i}function Lt(t){for(var e=arguments,n=-1,r=tt(e,!0,!1,1),i=e[2]&&e[2][e[1]]===t?1:r.length,a=dn(i);++n<i;)a[n]=t[r[n]];return a}function Jt(t,e,n){var r=-1,i=st(),a=t?t.length:0,o=!1;return n=(0>n?Jn(0,a+n):n)||0,Zn(t)?o=i(t,e,n)>-1:"number"==typeof a?o=(Ht(t)?t.indexOf(e,n):i(t,e,n))>-1:sr(t,function(t){return++r>=n?!(o=t===e):void 0}),o}function Wt(t,e,n){var r=!0;e=d.createCallback(e,n,3);var i=-1,a=t?t.length:0;if("number"==typeof a)for(;++i<a&&(r=!!e(t[i],i,t)););else sr(t,function(t,n,i){return r=!!e(t,n,i)});return r}function Xt(t,e,n){var r=[];e=d.createCallback(e,n,3);var i=-1,a=t?t.length:0;if("number"==typeof a)for(;++i<a;){var o=t[i];e(o,i,t)&&r.push(o)}else sr(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function Vt(t,e,n){e=d.createCallback(e,n,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var a;return sr(t,function(t,n,r){return e(t,n,r)?(a=t,!1):void 0}),a}for(;++r<i;){var o=t[r];if(e(o,r,t))return o}}function Kt(t,e,n){var r;return e=d.createCallback(e,n,3),Qt(t,function(t,n,i){return e(t,n,i)?(r=t,!1):void 0}),r}function Gt(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:G(e,n,3),"number"==typeof i)for(;++r<i&&e(t[r],r,t)!==!1;);else sr(t,e);return t}function Qt(t,e,n){var r=t?t.length:0;if(e=e&&"undefined"==typeof n?e:G(e,n,3),"number"==typeof r)for(;r--&&e(t[r],r,t)!==!1;);else{var i=tr(t);r=i.length,sr(t,function(t,n,a){return n=i?i[--r]:--r,e(a[n],n,a)})}return t}function Zt(t,e){var n=f(arguments,2),r=-1,i="function"==typeof e,a=t?t.length:0,o=dn("number"==typeof a?a:0);return Gt(t,function(t){o[++r]=(i?e:t[e]).apply(t,n)}),o}function Yt(t,e,n){var r=-1,i=t?t.length:0;if(e=d.createCallback(e,n,3),"number"==typeof i)for(var a=dn(i);++r<i;)a[r]=e(t[r],r,t);else a=[],sr(t,function(t,n,i){a[++r]=e(t,n,i)});return a}function te(t,e,n){var i=-(1/0),a=i;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Zn(t))for(var o=-1,u=t.length;++o<u;){var s=t[o];s>a&&(a=s)}else e=null==e&&Ht(t)?r:d.createCallback(e,n,3),Gt(t,function(t,n,r){var o=e(t,n,r);o>i&&(i=o,a=t)});return a}function ee(t,e,n){var i=1/0,a=i;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Zn(t))for(var o=-1,u=t.length;++o<u;){var s=t[o];a>s&&(a=s)}else e=null==e&&Ht(t)?r:d.createCallback(e,n,3),Gt(t,function(t,n,r){var o=e(t,n,r);i>o&&(i=o,a=t)});return a}function ne(t,e,n,r){if(!t)return n;var i=arguments.length<3;e=d.createCallback(e,r,4);var a=-1,o=t.length;if("number"==typeof o)for(i&&(n=t[++a]);++a<o;)n=e(n,t[a],a,t);else sr(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)});return n}function re(t,e,n,r){var i=arguments.length<3;return e=d.createCallback(e,r,4),Qt(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)}),n}function ie(t,e,n){return e=d.createCallback(e,n,3),Xt(t,function(t,n,r){return!e(t,n,r)})}function ae(t,e,n){if(t&&"number"!=typeof t.length&&(t=Dt(t)),null==e||n)return t?t[rt(0,t.length-1)]:p;var r=oe(t);return r.length=Wn(Jn(0,e),r.length),r}function oe(t){var e=-1,n=t?t.length:0,r=dn("number"==typeof n?n:0);return Gt(t,function(t){var n=rt(0,++e);r[e]=r[n],r[n]=t}),r}function ue(t){var e=t?t.length:0;return"number"==typeof e?e:tr(t).length}function se(t,e,n){var r;e=d.createCallback(e,n,3);var i=-1,a=t?t.length:0;if("number"==typeof a)for(;++i<a&&!(r=e(t[i],i,t)););else sr(t,function(t,n,i){return!(r=e(t,n,i))});return!!r}function ce(t,e,n){var r=-1,a=Zn(e),o=t?t.length:0,f=dn("number"==typeof o?o:0);for(a||(e=d.createCallback(e,n,3)),Gt(t,function(t,n,i){var o=f[++r]=s();a?o.criteria=Yt(e,function(e){return t[e]}):(o.criteria=u())[0]=e(t,n,i),o.index=r,o.value=t}),o=f.length,f.sort(i);o--;){var h=f[o];f[o]=h.value,a||c(h.criteria),l(h)}return f}function le(t){return t&&"number"==typeof t.length?f(t):Dt(t)}function fe(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function he(t){return Z(t,tt(arguments,!0,!0,1))}function pe(t,e,n){var r=-1,i=t?t.length:0;for(e=d.createCallback(e,n,3);++r<i;)if(e(t[r],r,t))return r;return-1}function de(t,e,n){var r=t?t.length:0;for(e=d.createCallback(e,n,3);r--;)if(e(t[r],r,t))return r;return-1}function ve(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var a=-1;for(e=d.createCallback(e,n,3);++a<i&&e(t[a],a,t);)r++}else if(r=e,null==r||n)return t?t[0]:p;return f(t,0,Wn(Jn(0,r),i))}function ge(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(t=Yt(t,n,r)),tt(t,e)}function ye(e,n,r){if("number"==typeof r){var i=e?e.length:0;r=0>r?Jn(0,i+r):r||0}else if(r){var a=Ce(e,n);return e[a]===n?a:-1}return t(e,n,r)}function me(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var a=i;for(e=d.createCallback(e,n,3);a--&&e(t[a],a,t);)r++}else r=null==e||n?1:e||r;return f(t,0,Wn(Jn(0,i-r),i))}function _e(){for(var n=[],r=-1,i=arguments.length,o=u(),s=st(),f=s===t,h=u();++r<i;){var p=arguments[r];(Zn(p)||ht(p))&&(n.push(p),o.push(f&&p.length>=m&&a(r?n[r]:h)))}var d=n[0],v=-1,g=d?d.length:0,y=[];t:for(;++v<g;){var _=o[0];if(p=d[v],(_?e(_,p):s(h,p))<0){for(r=i,(_||h).push(p);--r;)if(_=o[r],(_?e(_,p):s(n[r],p))<0)continue t;y.push(p)}}for(;i--;)_=o[i],_&&l(_);return c(o),c(h),y}function be(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var a=i;for(e=d.createCallback(e,n,3);a--&&e(t[a],a,t);)r++}else if(r=e,null==r||n)return t?t[i-1]:p;return f(t,Jn(0,i-r))}function we(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?Jn(0,r+n):Wn(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function xe(t){for(var e=arguments,n=0,r=e.length,i=t?t.length:0;++n<r;)for(var a=-1,o=e[n];++a<i;)t[a]===o&&(Un.call(t,a--,1),i--);return t}function ke(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var r=-1,i=Jn(0,$n((e-t)/(n||1))),a=dn(i);++r<i;)a[r]=t,t+=n;return a}function je(t,e,n){var r=-1,i=t?t.length:0,a=[];for(e=d.createCallback(e,n,3);++r<i;){var o=t[r];e(o,r,t)&&(a.push(o),Un.call(t,r--,1),i--)}return a}function Ee(t,e,n){if("number"!=typeof e&&null!=e){var r=0,i=-1,a=t?t.length:0;for(e=d.createCallback(e,n,3);++i<a&&e(t[i],i,t);)r++}else r=null==e||n?1:Jn(0,e);return f(t,r)}function Ce(t,e,n,r){var i=0,a=t?t.length:i;for(n=n?d.createCallback(n,r,1):Qe,e=n(e);a>i;){var o=i+a>>>1;n(t[o])<e?i=o+1:a=o}return i}function Se(){return it(tt(arguments,!0,!0))}function Te(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(n=d.createCallback(n,r,3)),it(t,e,n)}function $e(t){return Z(t,f(arguments,1))}function Oe(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Zn(n)||ht(n))var r=r?it(Z(r,n).concat(Z(n,r))):n}return r||[]}function Ne(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?te(pr(t,"length")):0,r=dn(0>n?0:n);++e<n;)r[e]=pr(t,e);return r}function Ie(t,e){var n=-1,r=t?t.length:0,i={};for(e||!r||Zn(t[0])||(e=[]);++n<r;){var a=t[n];e?i[a]=e[n]:a&&(i[a[0]]=a[1])}return i}function Re(t,e){if(!$t(e))throw new kn;return function(){return--t<1?e.apply(this,arguments):void 0}}function Ae(t,e){return arguments.length>2?ot(t,17,f(arguments,2),null,e):ot(t,1,null,null,e)}function He(t){for(var e=arguments.length>1?tt(arguments,!0,!1,1):bt(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=ot(t[i],1,null,null,t)}return t}function Pe(t,e){return arguments.length>2?ot(e,19,f(arguments,2),null,t):ot(e,3,null,null,t)}function Ue(){for(var t=arguments,e=t.length;e--;)if(!$t(t[e]))throw new kn;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Fe(t,e){return e="number"==typeof e?e:+e||t.length,ot(t,4,null,null,null,e)}function qe(t,e,n){var r,i,a,o,u,s,c,l=0,f=!1,h=!0;if(!$t(t))throw new kn;if(e=Jn(0,e)||0,n===!0){var d=!0;h=!1}else Ot(n)&&(d=n.leading,f="maxWait"in n&&(Jn(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var v=function(){var n=e-(vr()-o);if(0>=n){i&&On(i);var f=c;i=s=c=p,f&&(l=vr(),a=t.apply(u,r),s||i||(r=u=null))}else s=Pn(v,n)},g=function(){s&&On(s),i=s=c=p,(h||f!==e)&&(l=vr(),a=t.apply(u,r),s||i||(r=u=null))};return function(){if(r=arguments,o=vr(),u=this,c=h&&(s||!d),f===!1)var n=d&&!s;else{i||d||(l=o);var p=f-(o-l),y=0>=p;y?(i&&(i=On(i)),l=o,a=t.apply(u,r)):i||(i=Pn(g,p))}return y&&s?s=On(s):s||e===f||(s=Pn(v,e)),n&&(y=!0,a=t.apply(u,r)),!y||s||i||(r=u=null),a}}function Be(t){if(!$t(t))throw new kn;var e=f(arguments,1);return Pn(function(){t.apply(p,e)},1)}function Me(t,e){if(!$t(t))throw new kn;var n=f(arguments,2);return Pn(function(){t.apply(p,n)},e)}function ze(t,e){if(!$t(t))throw new kn;var n=function(){var r=n.cache,i=e?e.apply(this,arguments):y+arguments[0];return An.call(r,i)?r[i]:r[i]=t.apply(this,arguments)};return n.cache={},n}function De(t){var e,n;if(!$t(t))throw new kn;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Le(t){return ot(t,16,f(arguments,1))}function Je(t){return ot(t,32,null,f(arguments,1))}function We(t,e,n){var r=!0,i=!0;if(!$t(t))throw new kn;return n===!1?r=!1:Ot(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),L.leading=r,L.maxWait=e,L.trailing=i,qe(t,e,L)}function Xe(t,e){return ot(e,16,[t])}function Ve(t){return function(){return t}}function Ke(t,e,n){var r=typeof t;if(null==t||"function"==r)return G(t,e,n);if("object"!=r)return en(t);var i=tr(t),a=i[0],o=t[a];return 1!=i.length||o!==o||Ot(o)?function(e){for(var n=i.length,r=!1;n--&&(r=et(e[i[n]],t[i[n]],null,!0)););return r}:function(t){var e=t[a];return o===e&&(0!==o||1/o==1/e)}}function Ge(t){return null==t?"":xn(t).replace(ir,ut)}function Qe(t){return t}function Ze(t,e,n){var r=!0,i=e&&bt(e);e&&(n||i.length)||(null==n&&(n=e),a=v,e=t,t=d,i=bt(e)),n===!1?r=!1:Ot(n)&&"chain"in n&&(r=n.chain);var a=t,o=$t(a);Gt(i,function(n){var i=t[n]=e[n];o&&(a.prototype[n]=function(){var e=this.__chain__,n=this.__wrapped__,o=[n];Hn.apply(o,arguments);var u=i.apply(t,o);if(r||e){if(n===u&&Ot(u))return this;u=new a(u),u.__chain__=e}return u})})}function Ye(){return n._=Cn,this}function tn(){}function en(t){return function(e){return e[t]}}function nn(t,e,n){var r=null==t,i=null==e;if(null==n&&("boolean"==typeof t&&i?(n=t,t=1):i||"boolean"!=typeof e||(n=e,i=!0)),r&&i&&(e=1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var a=Vn();return Wn(t+a*(e-t+parseFloat("1e-"+((a+"").length-1))),e)}return rt(t,e)}function rn(t,e){if(t){var n=t[e];return $t(n)?t[e]():n}}function an(t,e,n){var r=d.templateSettings;t=xn(t||""),n=or({},n,r);var i,a=or({},n.imports,r.imports),u=tr(a),s=Dt(a),c=0,l=n.interpolate||$,f="__p += '",h=wn((n.escape||$).source+"|"+l.source+"|"+(l===S?j:$).source+"|"+(n.evaluate||$).source+"|$","g");t.replace(h,function(e,n,r,a,u,s){return r||(r=a),f+=t.slice(c,s).replace(N,o),n&&(f+="' +\n__e("+n+") +\n'"),u&&(i=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+e.length,e}),f+="';\n";var v=n.variable,g=v;g||(v="obj",f="with ("+v+") {\n"+f+"\n}\n"),f=(i?f.replace(w,""):f).replace(x,"$1").replace(k,"$1;"),f="function("+v+") {\n"+(g?"":v+" || ("+v+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var y="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+R++ +"]")+"\n*/";try{var m=yn(u,"return "+f+y).apply(p,s)}catch(_){throw _.source=f,_}return e?m(e):(m.source=f,m)}function on(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=dn(t);for(e=G(e,n,1);++r<t;)i[r]=e(r);return i}function un(t){return null==t?"":xn(t).replace(rr,ft)}function sn(t){var e=++g;return xn(null==t?"":t)+e}function cn(t){return t=new v(t),t.__chain__=!0,t}function ln(t,e){return e(t),t}function fn(){return this.__chain__=!0,this}function hn(){return xn(this.__wrapped__)}function pn(){return this.__wrapped__}n=n?Y.defaults(V.Object(),n,Y.pick(V,I)):V;var dn=n.Array,vn=n.Boolean,gn=n.Date,yn=n.Function,mn=n.Math,_n=n.Number,bn=n.Object,wn=n.RegExp,xn=n.String,kn=n.TypeError,jn=[],En=bn.prototype,Cn=n._,Sn=En.toString,Tn=wn("^"+xn(Sn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),$n=mn.ceil,On=n.clearTimeout,Nn=mn.floor,In=yn.prototype.toString,Rn=ct(Rn=bn.getPrototypeOf)&&Rn,An=En.hasOwnProperty,Hn=jn.push,Pn=n.setTimeout,Un=jn.splice,Fn=jn.unshift,qn=function(){try{var t={},e=ct(e=bn.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),Bn=ct(Bn=bn.create)&&Bn,Mn=ct(Mn=dn.isArray)&&Mn,zn=n.isFinite,Dn=n.isNaN,Ln=ct(Ln=bn.keys)&&Ln,Jn=mn.max,Wn=mn.min,Xn=n.parseInt,Vn=mn.random,Kn={};Kn[H]=dn,Kn[P]=vn,Kn[U]=gn,Kn[F]=yn,Kn[B]=bn,Kn[q]=_n,Kn[M]=wn,Kn[z]=xn,v.prototype=d.prototype;var Gn=d.support={};Gn.funcDecomp=!ct(n.WinRTError)&&O.test(h),Gn.funcNames="string"==typeof yn.name,d.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:S,variable:"",imports:{_:d}},Bn||(K=function(){function t(){}return function(e){if(Ot(e)){t.prototype=e;var r=new t;t.prototype=null}return r||n.Object()}}());var Qn=qn?function(t,e){J.value=e,qn(t,"__bindData__",J)}:tn,Zn=Mn||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Sn.call(t)==H||!1},Yn=function(t){var e,n=t,r=[];if(!n)return r;if(!W[typeof t])return r;for(e in n)An.call(n,e)&&r.push(e);return r},tr=Ln?function(t){return Ot(t)?Ln(t):[]}:Yn,er={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nr=xt(er),rr=wn("("+tr(nr).join("|")+")","g"),ir=wn("["+tr(er).join("")+"]","g"),ar=function(t,e,n){var r,i=t,a=i;if(!i)return a;var o=arguments,u=0,s="number"==typeof n?2:o.length;if(s>3&&"function"==typeof o[s-2])var c=G(o[--s-1],o[s--],2);else s>2&&"function"==typeof o[s-1]&&(c=o[--s]);for(;++u<s;)if(i=o[u],i&&W[typeof i])for(var l=-1,f=W[typeof i]&&tr(i),h=f?f.length:0;++l<h;)r=f[l],a[r]=c?c(a[r],i[r]):i[r];return a},or=function(t,e,n){var r,i=t,a=i;if(!i)return a;for(var o=arguments,u=0,s="number"==typeof n?2:o.length;++u<s;)if(i=o[u],i&&W[typeof i])for(var c=-1,l=W[typeof i]&&tr(i),f=l?l.length:0;++c<f;)r=l[c],"undefined"==typeof a[r]&&(a[r]=i[r]);return a},ur=function(t,e,n){var r,i=t,a=i;if(!i)return a;if(!W[typeof i])return a;e=e&&"undefined"==typeof n?e:G(e,n,3);for(r in i)if(e(i[r],r,t)===!1)return a;return a},sr=function(t,e,n){var r,i=t,a=i;if(!i)return a;if(!W[typeof i])return a;e=e&&"undefined"==typeof n?e:G(e,n,3);for(var o=-1,u=W[typeof i]&&tr(i),s=u?u.length:0;++o<s;)if(r=u[o],e(i[r],r,t)===!1)return a;return a},cr=Rn?function(t){if(!t||Sn.call(t)!=B)return!1;var e=t.valueOf,n=ct(e)&&(n=Rn(e))&&Rn(n);return n?t==n||Rn(t)==n:lt(t)}:lt,lr=at(function(t,e,n){An.call(t,n)?t[n]++:t[n]=1}),fr=at(function(t,e,n){(An.call(t,n)?t[n]:t[n]=[]).push(e)}),hr=at(function(t,e,n){t[n]=e}),pr=Yt,dr=Xt,vr=ct(vr=gn.now)&&vr||function(){return(new gn).getTime()},gr=8==Xn(b+"08")?Xn:function(t,e){return Xn(Ht(t)?t.replace(T,""):t,e||0)};return d.after=Re,d.assign=ar,d.at=Lt,d.bind=Ae,d.bindAll=He,d.bindKey=Pe,d.chain=cn,d.compact=fe,d.compose=Ue,d.constant=Ve,d.countBy=lr,d.create=vt,d.createCallback=Ke,d.curry=Fe,d.debounce=qe,d.defaults=or,d.defer=Be,d.delay=Me,d.difference=he,d.filter=Xt,d.flatten=ge,d.forEach=Gt,d.forEachRight=Qt,d.forIn=ur,d.forInRight=mt,d.forOwn=sr,d.forOwnRight=_t,d.functions=bt,d.groupBy=fr,d.indexBy=hr,d.initial=me,d.intersection=_e,d.invert=xt,d.invoke=Zt,d.keys=tr,d.map=Yt,d.mapValues=Ut,d.max=te,d.memoize=ze,d.merge=Ft,d.min=ee,d.omit=qt,d.once=De,d.pairs=Bt,d.partial=Le,d.partialRight=Je,d.pick=Mt,d.pluck=pr,d.property=en,d.pull=xe,d.range=ke,d.reject=ie,d.remove=je,d.rest=Ee,d.shuffle=oe,d.sortBy=ce,d.tap=ln,d.throttle=We,d.times=on,d.toArray=le,d.transform=zt,d.union=Se,d.uniq=Te,d.values=Dt,d.where=dr,d.without=$e,d.wrap=Xe,d.xor=Oe,d.zip=Ne,d.zipObject=Ie,d.collect=Yt,d.drop=Ee,d.each=Gt,d.eachRight=Qt,d.extend=ar,d.methods=bt,d.object=Ie,d.select=Xt,d.tail=Ee,d.unique=Te,d.unzip=Ne,Ze(d),d.clone=pt,d.cloneDeep=dt,d.contains=Jt,d.escape=Ge,d.every=Wt,d.find=Vt,d.findIndex=pe,d.findKey=gt,d.findLast=Kt,d.findLastIndex=de,d.findLastKey=yt,d.has=wt,d.identity=Qe,d.indexOf=ye,d.isArguments=ht,d.isArray=Zn,d.isBoolean=kt,d.isDate=jt,d.isElement=Et,d.isEmpty=Ct,d.isEqual=St,d.isFinite=Tt,d.isFunction=$t,d.isNaN=Nt,d.isNull=It,d.isNumber=Rt,d.isObject=Ot,d.isPlainObject=cr,d.isRegExp=At,d.isString=Ht,d.isUndefined=Pt,d.lastIndexOf=we,d.mixin=Ze,d.noConflict=Ye,d.noop=tn,d.now=vr,d.parseInt=gr,d.random=nn,d.reduce=ne,d.reduceRight=re,d.result=rn,d.runInContext=h,d.size=ue,d.some=se,d.sortedIndex=Ce,d.template=an,d.unescape=un,d.uniqueId=sn,d.all=Wt,d.any=se,d.detect=Vt,d.findWhere=Vt,d.foldl=ne,d.foldr=re,d.include=Jt,d.inject=ne,Ze(function(){var t={};return sr(d,function(e,n){d.prototype[n]||(t[n]=e)}),t}(),!1),d.first=ve,d.last=be,d.sample=ae,d.take=ve,d.head=ve,sr(d,function(t,e){var n="sample"!==e;d.prototype[e]||(d.prototype[e]=function(e,r){var i=this.__chain__,a=t(this.__wrapped__,e,r);return i||null!=e&&(!r||n&&"function"==typeof e)?new v(a,i):a})}),d.VERSION="2.4.1",d.prototype.chain=fn,d.prototype.toString=hn,d.prototype.value=pn,d.prototype.valueOf=pn,Gt(["join","pop","shift"],function(t){var e=jn[t];d.prototype[t]=function(){var t=this.__chain__,n=e.apply(this.__wrapped__,arguments);return t?new v(n,t):n}}),Gt(["push","reverse","sort","unshift"],function(t){var e=jn[t];d.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),Gt(["concat","slice","splice"],function(t){var e=jn[t];d.prototype[t]=function(){return new v(e.apply(this.__wrapped__,arguments),this.__chain__)}}),d}var p,d=[],v=[],g=0,y=+new Date+"",m=75,_=40,b=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",w=/\b__p \+= '';/g,x=/\b(__p \+=) '' \+/g,k=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,E=/\w*$/,C=/^\s*function[ \n\r\t]+\w/,S=/<%=([\s\S]+?)%>/g,T=RegExp("^["+b+"]*0+(?=.$)"),$=/($^)/,O=/\bthis\b/,N=/['\n\r\t\u2028\u2029\\]/g,I=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],R=0,A="[object Arguments]",H="[object Array]",P="[object Boolean]",U="[object Date]",F="[object Function]",q="[object Number]",B="[object Object]",M="[object RegExp]",z="[object String]",D={};D[F]=!1,D[A]=D[H]=D[P]=D[U]=D[q]=D[B]=D[M]=D[z]=!0;var L={leading:!1,maxWait:0,trailing:!1},J={configurable:!1,enumerable:!1,value:null,writable:!1},W={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},X={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},V=W[typeof window]&&window||this,K=W[typeof exports]&&exports&&!exports.nodeType&&exports,G=W[typeof module]&&module&&!module.nodeType&&module,Q=G&&G.exports===K&&K,Z=W[typeof global]&&global;!Z||Z.global!==Z&&Z.window!==Z||(V=Z);var Y=h();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(V._=Y,define(function(){return Y})):K&&G?Q?(G.exports=Y)._=Y:K._=Y:V._=Y}).call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,r,i){t.Backbone=e(t,i,n,r)});else if("undefined"!=typeof exports){var n,r=require("underscore");try{n=require("jquery")}catch(i){}e(t,exports,r,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,r){{var i=t.Backbone,a=[],o=(a.push,a.slice);a.splice}e.VERSION="1.1.0",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var u=e.Events={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,r){if(!c(this,"once",t,[e,r])||!e)return this;var i=this,a=n.once(function(){i.off(t,a),e.apply(this,arguments)});return a._callback=e,this.on(t,a,r)},off:function(t,e,r){var i,a,o,u,s,l,f,h;if(!this._events||!c(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events=void 0,this;for(u=t?[t]:n.keys(this._events),s=0,l=u.length;l>s;s++)if(t=u[s],o=this._events[t]){if(this._events[t]=i=[],e||r)for(f=0,h=o.length;h>f;f++)a=o[f],(e&&e!==a.callback&&e!==a.callback._callback||r&&r!==a.context)&&i.push(a);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&l(n,e),r&&l(r,arguments),this},stopListening:function(t,e,r){var i=this._listeningTo;if(!i)return this;var a=!e&&!r;r||"object"!=typeof e||(r=this),t&&((i={})[t._listenId]=t);for(var o in i)t=i[o],t.off(e,r,this),(a||n.isEmpty(t._events))&&delete this._listeningTo[o];return this}},s=/\s+/,c=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(s.test(n)){for(var a=n.split(s),o=0,u=a.length;u>o;o++)t[e].apply(t,[a[o]].concat(r));return!1}return!0},l=function(t,e){var n,r=-1,i=t.length,a=e[0],o=e[1],u=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,a);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,a,o);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,a,o,u);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},f={listenTo:"on",listenToOnce:"once"};n.each(f,function(t,e){u[e]=function(e,r,i){var a=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=n.uniqueId("l"));return a[o]=e,i||"object"!=typeof r||(i=this),e[t](r,i,this),this}}),u.bind=u.on,u.unbind=u.off,n.extend(e,u);var h=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var i,a,o,u,s,c,l,f;if(null==t)return this;if("object"==typeof t?(a=t,r=e):(a={})[t]=e,r||(r={}),!this._validate(a,r))return!1;o=r.unset,s=r.silent,u=[],c=this._changing,this._changing=!0,
c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),f=this.attributes,l=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]);for(i in a)e=a[i],n.isEqual(f[i],e)||u.push(i),n.isEqual(l[i],e)?delete this.changed[i]:this.changed[i]=e,o?delete f[i]:f[i]=e;if(!s){u.length&&(this._pending=r);for(var h=0,p=u.length;p>h;h++)this.trigger("change:"+u[h],this,f[u[h]],r)}if(c)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var a in t)n.isEqual(i[a],e=t[a])||((r||(r={}))[a]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,r=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(r&&r(e,n,t),void e.trigger("sync",e,n,t)):!1},U(this,t),this.sync("read",this,t)},save:function(t,e,r){var i,a,o,u=this.attributes;if(null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e,r=n.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),void 0===r.parse&&(r.parse=!0);var s=this,c=r.success;return r.success=function(t){s.attributes=u;var e=s.parse(t,r);return r.wait&&(e=n.extend(i||{},e)),n.isObject(e)&&!s.set(e,r)?!1:(c&&c(s,t,r),void s.trigger("sync",s,t,r))},U(this,r),a=this.isNew()?"create":r.patch?"patch":"update","patch"===a&&(r.attrs=i),o=this.sync(a,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&i(),r&&r(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;U(this,t);var a=this.sync("delete",this,t);return t.wait||i(),a},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||P();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return r?(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(t){h.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var d=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(d.prototype,u,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,g))},remove:function(t,e){var r=!n.isArray(t);t=r?[t]:n.clone(t),e||(e={});var i,a,o,u;for(i=0,a=t.length;a>i;i++)u=t[i]=this.get(t[i]),u&&(delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,e.silent||(e.index=o,u.trigger("remove",u,this,e)),this._removeReference(u,e));return r?t[0]:t},set:function(t,e){e=n.defaults({},e,v),e.parse&&(t=this.parse(t,e));var r=!n.isArray(t);t=r?t?[t]:[]:n.clone(t);var i,a,o,u,s,c,l,f=e.at,p=this.model,d=this.comparator&&null==f&&e.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,y=[],m=[],_={},b=e.add,w=e.merge,x=e.remove,k=!d&&b&&x?[]:!1;for(i=0,a=t.length;a>i;i++){if(s=t[i]||{},o=s instanceof h?u=s:s[p.prototype.idAttribute||"id"],c=this.get(o))x&&(_[c.cid]=!0),w&&(s=s===u?u.attributes:s,e.parse&&(s=c.parse(s,e)),c.set(s,e),d&&!l&&c.hasChanged(g)&&(l=!0)),t[i]=c;else if(b){if(u=t[i]=this._prepareModel(s,e),!u)continue;y.push(u),this._addReference(u,e)}u=c||u,!k||!u.isNew()&&_[u.id]||k.push(u),_[u.id]=!0}if(x){for(i=0,a=this.length;a>i;++i)_[(u=this.models[i]).cid]||m.push(u);m.length&&this.remove(m,e)}if(y.length||k&&k.length)if(d&&(l=!0),this.length+=y.length,null!=f)for(i=0,a=y.length;a>i;i++)this.models.splice(f+i,0,y[i]);else{k&&(this.models.length=0);var j=k||y;for(i=0,a=j.length;a>i;i++)this.models.push(j[i])}if(l&&this.sort({silent:!0}),!e.silent){for(i=0,a=y.length;a>i;i++)(u=y[i]).trigger("add",u,this,e);(l||k&&k.length)&&this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,i=this.models.length;i>r;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e(r,n,t),r.trigger("sync",r,n,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var r=this,i=e.success;return e.success=function(t,n){e.wait&&r.add(t,e),i&&i(t,n,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t;e=e?n.clone(e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(y,function(t){d.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var m=["groupBy","countBy","sortBy","indexBy"];n.each(m,function(t){d.prototype[t]=function(e,r){var i=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,i,r)}});var _=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(n.isFunction(r)||(r=this[t[e]]),r){var i=e.match(b),a=i[1],o=i[2];r=n.bind(r,this),a+=".delegateEvents"+this.cid,""===o?this.$el.on(a,r):this.$el.on(a,o,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var r=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}}),e.sync=function(t,r,i){var a=k[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:a,dataType:"json"};if(i.url||(o.url=n.result(r,"url")||P()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){o.type="POST",i.emulateJSON&&(o.data._method=a);var u=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",a),u?u.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"===o.type&&x&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var s=i.xhr=e.ajax(n.extend(o,i));return r.trigger("request",r,s,i),s};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var j=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,S=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(j.prototype,u,{initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var a=this;return e.history.route(t,function(n){var o=a._extractParameters(t,n);a.execute(i,o),a.trigger.apply(a,["route:"+r].concat(o)),a.trigger("route",r,o),e.history.trigger("route",a,r,o)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(T,"\\$&").replace(E,"(?:$1)?").replace(C,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?(.*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var $=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},O=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,I=/msie [\w.]+/,R=/\/$/,A=/#.*$/;$.started=!1,n.extend($.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(R,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(O,"")},start:function(t){if($.started)throw new Error("Backbone.history has already been started");$.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,a=I.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);if(this.root=("/"+this.root+"/").replace(N,"/"),a&&this._wantsHashChange){var o=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(O,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),$.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!$.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(A,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new $;var H=function(t,e){var r,i=this;r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e);var a=function(){this.constructor=r};return a.prototype=i.prototype,r.prototype=new a,t&&n.extend(r.prototype,t),r.__super__=i.prototype,r};h.extend=d.extend=j.extend=_.extend=$.extend=H;var P=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}};return e});